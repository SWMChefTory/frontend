# Amplitude Analytics 도입 현황 공유

## 1. 개요

Cheftory 앱에 사용자 행동 분석 도구인 **Amplitude Analytics**를 도입했습니다.
이를 통해 사용자들이 앱을 어떻게 사용하는지 데이터 기반으로 파악할 수 있습니다.

---

## 2. 현재 구현 상태

| 항목 | 상태 | 비고 |
|------|------|------|
| 기본 이벤트 추적 | ✅ 완료 | 앱 실행, 버튼 클릭 등 추적 가능 |
| 세션 리플레이 | ✅ 완료 | 사용자 화면 녹화 기능 |
| 테스트 검증 | ✅ 완료 | Amplitude 대시보드에서 데이터 수신 확인 |

### 추적 가능한 정보
- **이벤트**: 레시피 생성, 조리 시작/종료, 버튼 클릭 등 사용자 행동
- **세션 리플레이**: 사용자가 앱을 사용하는 화면을 녹화하여 재생 가능
- **사용자 식별**: 앱 설치 고유 ID로 동일 사용자 추적 (개인정보 수집 아님)
  - 앱 삭제 후 재설치 시 새로운 ID 생성 (새 사용자로 인식)
  - 동일 계정이라도 다른 기기에서는 다른 ID로 추적

---

## 3. 세션 리플레이란?

사용자가 앱을 사용하는 화면을 녹화하여 나중에 재생할 수 있는 기능입니다.

### 동작 방식
- 앱 실행 시 자동으로 녹화 시작
- 앱 종료 또는 백그라운드 전환 시 녹화 종료
- 실시간 비디오가 아닌 **스냅샷 기반** 녹화 (데이터 사용량 적음)

### 활용 사례
- UX 문제점 발견 (사용자가 어디서 헤매는지)
- 버그 재현 (사용자가 어떤 경로로 버그를 만났는지)
- 기능 개선 아이디어 도출

---

## 4. 개인정보 관련 사항

### 4.1 현재 수집 정보

| 수집 항목 | 개인정보 해당 여부 | 설명 |
|-----------|-------------------|------|
| 앱 설치 고유 ID (UUID) | ❌ 아님 | 랜덤 생성된 ID, 개인 식별 불가 |
| 이벤트 데이터 | ❌ 아님 | 레시피 ID, 버튼 클릭 등 행동 데이터 |
| 세션 리플레이 | ⚠️ 검토 필요 | 화면 녹화로 간접적 정보 노출 가능 |

### 4.2 개인정보처리방침 업데이트 필요 여부

#### 이벤트 추적만 사용 시
- **업데이트 권장** (필수는 아님)
- 수집 정보: 앱 사용 패턴, 기기 정보
- 리스크: 낮음

#### 세션 리플레이 사용 시
- **업데이트 필수**
- 추가 고지 필요 항목:
  - 화면 녹화 사실 안내
  - 녹화 목적 (서비스 개선)
  - 데이터 보관 기간
  - 제3자 제공 (Amplitude Inc.)

### 4.3 권장 문구 예시

```
[앱 사용 데이터 수집]
당사는 서비스 개선을 위해 다음 정보를 수집합니다:
- 앱 사용 패턴 (버튼 클릭, 화면 이동 등)
- 기기 정보 (OS 종류)
- 화면 녹화 (개인정보는 자동 마스킹 처리)

수집된 정보는 Amplitude Inc.에 안전하게 전송되어 분석에 활용됩니다.
```

---

## 5. 세션 리플레이 제외 옵션

개인정보 동의 획득이 어려운 경우, **세션 리플레이만 비활성화**할 수 있습니다.

### 비활성화 시 영향

| 기능 | 세션 리플레이 ON | 세션 리플레이 OFF |
|------|-----------------|------------------|
| 이벤트 추적 | ✅ 가능 | ✅ 가능 |
| 사용자 행동 분석 | ✅ 가능 | ✅ 가능 |
| 화면 녹화 재생 | ✅ 가능 | ❌ 불가 |
| 개인정보 동의 | ⚠️ 필요 | 선택적 |

### 결론
- 이벤트 추적만으로도 **충분한 사용자 분석 가능**
- 세션 리플레이는 **선택적 기능**으로, 나중에 동의 체계 구축 후 활성화 가능

---

## 6. 무료 플랜 한도

| 항목 | 월간 한도 | 초과 시 |
|------|----------|---------|
| 이벤트 수 | 50,000건 | 추가 이벤트 무시됨 |
| 세션 리플레이 | 1,000건 | 추가 녹화 무시됨 |

### 예상 사용량 (참고)
- 일일 활성 사용자 100명 기준
- 사용자당 평균 20개 이벤트 발생 시
- 월간 약 60,000건 → 무료 한도 초과 가능성 있음

유료 플랜 전환 시점은 실제 사용량 추이를 보고 결정하면 됩니다.

---

## 7. 향후 진행 사항

### 즉시 필요
- [ ] 개인정보처리방침 업데이트 검토 (법무/기획)
- [ ] 세션 리플레이 사용 여부 최종 결정

### 추후 진행
- [ ] 추적할 이벤트 목록 정의 (기획)
- [ ] WebView에서 이벤트 전송 코드 추가 (개발)
- [ ] 사용량 모니터링 및 유료 플랜 검토

---

## 8. 기술 구현 요약 (개발팀 참고)

| 영역 | 변경 사항 |
|------|----------|
| 저장소 | SecureStore에 앱 설치 ID(UUID) 저장 로직 추가 |
| 초기화 | 앱 실행 시 Amplitude SDK 초기화 + 세션 리플레이 활성화 |
| 이벤트 전송 | WebView → Native Bridge → Amplitude 경로로 전송 |
| 환경변수 | `.env`에 Amplitude API Key 추가 |

### 세션 리플레이 비활성화 방법

`amplitude.ts` 파일에서 `SessionReplayPlugin` 관련 코드 제거

---

## 9. 담당자 문의

기술적 질문이나 추가 기능 요청은 개발팀에 문의해 주세요.

- 구현 완료일: 2025년 12월
- Amplitude 대시보드: https://app.amplitude.com
